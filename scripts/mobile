#!/bin/bash
# Start the Expo development server for the mobile app
#
# Usage:
#   scripts/mobile         # Start Expo dev server
#   scripts/mobile ios     # Start and open iOS simulator
#   scripts/mobile clear   # Clear cache and start

set -e
cd "$(dirname "$0")/../mobile"

# Install dependencies if needed
if [ ! -d "node_modules" ]; then
    echo "Installing mobile dependencies..."
    npm install
fi

case "${1:-}" in
    ios)
        echo "Starting Expo and opening iOS simulator..."
        npx expo start --ios
        ;;
    clear)
        echo "Clearing cache and starting..."
        npx expo start --clear
        ;;
    *)
        echo "Starting Expo dev server..."
        echo ""
        echo "Press 'i' to open iOS simulator"
        echo "Press 'a' to open Android emulator"
        echo "Press 'r' to reload"
        echo ""
        npx expo start
        ;;
esac
