<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Section Hierarchy Playground</title>
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg: #1e1e2e;
    --bg-surface: #181825;
    --bg-raised: #313244;
    --bg-hover: #45475a;
    --text: #cdd6f4;
    --text-secondary: #a6adc8;
    --text-muted: #6c7086;
    --text-faint: #585b70;
    --edge: #45475a;
    --green: #a6e3a1;
    --orange: #fab387;
    --blue: #89b4fa;
    --red: #f38ba8;
    --teal: #94e2d5;
    --yellow: #f9e2af;
    --mauve: #cba6f7;
    --pink: #f5c2e7;
  }

  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
    background: #11111b;
    color: var(--text);
    height: 100vh;
    display: flex;
    overflow: hidden;
  }

  /* Controls panel */
  .controls {
    width: 320px;
    min-width: 320px;
    background: var(--bg-surface);
    border-right: 1px solid var(--edge);
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 20px;
    overflow-y: auto;
  }

  .controls h1 {
    font-size: 14px;
    font-weight: 600;
    color: var(--text);
    letter-spacing: 0.02em;
  }

  .controls p.desc {
    font-size: 12px;
    color: var(--text-muted);
    line-height: 1.5;
  }

  .option-group {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  .option-group label {
    font-size: 11px;
    font-weight: 500;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.06em;
  }

  .option-btn {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    padding: 10px 12px;
    border-radius: 8px;
    border: 1px solid transparent;
    background: transparent;
    color: var(--text-secondary);
    font-size: 12px;
    cursor: pointer;
    text-align: left;
    transition: all 0.15s;
    line-height: 1.4;
  }

  .option-btn:hover {
    background: var(--bg-raised);
  }

  .option-btn.active {
    background: var(--bg-raised);
    border-color: var(--mauve);
    color: var(--text);
  }

  .option-btn .radio {
    width: 16px;
    height: 16px;
    min-width: 16px;
    border-radius: 50%;
    border: 2px solid var(--text-faint);
    margin-top: 1px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.15s;
  }

  .option-btn.active .radio {
    border-color: var(--mauve);
  }

  .option-btn.active .radio::after {
    content: '';
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--mauve);
  }

  .option-btn .option-text strong {
    display: block;
    color: var(--text);
    font-size: 13px;
    margin-bottom: 2px;
  }

  /* Modifier checkboxes */
  .modifier-group {
    display: flex;
    flex-direction: column;
    gap: 4px;
    padding-top: 4px;
  }

  .modifier-group label.mod-label {
    text-transform: none;
    letter-spacing: normal;
    font-size: 12px;
    font-weight: 400;
    color: var(--text-secondary);
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    padding: 6px 8px;
    border-radius: 6px;
    transition: background 0.1s;
  }

  .modifier-group label.mod-label:hover {
    background: var(--bg-raised);
  }

  .modifier-group input[type="checkbox"] {
    appearance: none;
    width: 14px;
    height: 14px;
    min-width: 14px;
    border: 1.5px solid var(--text-faint);
    border-radius: 3px;
    background: transparent;
    cursor: pointer;
    position: relative;
  }

  .modifier-group input[type="checkbox"]:checked {
    background: var(--mauve);
    border-color: var(--mauve);
  }

  .modifier-group input[type="checkbox"]:checked::after {
    content: '✓';
    position: absolute;
    top: -1px;
    left: 1.5px;
    font-size: 10px;
    color: var(--bg);
    font-weight: 700;
  }

  /* Right side */
  .right {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  /* Preview area */
  .preview-area {
    flex: 1;
    display: flex;
    align-items: flex-start;
    justify-content: center;
    padding: 32px;
    overflow-y: auto;
  }

  .sidebar-mock {
    width: 340px;
    min-height: 500px;
    background: var(--bg);
    border-radius: 10px;
    border: 1px solid var(--edge);
    overflow: hidden;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
  }

  /* Tab bar */
  .tab-bar {
    display: flex;
    border-bottom: 1px solid var(--edge);
    padding: 0 8px;
  }

  .tab {
    padding: 8px 14px;
    font-size: 12px;
    color: var(--text-muted);
    cursor: default;
  }

  .tab.active {
    color: var(--text);
    border-bottom: 2px solid var(--mauve);
    font-weight: 500;
  }

  /* Section header */
  .section-header {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px 8px 12px;
    cursor: default;
    user-select: none;
    transition: background 0.1s, padding 0.2s, margin 0.2s;
    position: relative;
  }

  .section-header .section-icon {
    width: 14px;
    height: 14px;
    min-width: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .section-header .section-title {
    flex: 1;
    font-size: 12px;
    font-weight: 500;
    color: var(--text-secondary);
    transition: font-size 0.2s, font-weight 0.2s;
  }

  .section-header .badge {
    font-size: 10px;
    font-weight: 500;
    padding: 1px 7px;
    border-radius: 10px;
    font-variant-numeric: tabular-nums;
  }

  .section-header .header-actions {
    display: flex;
    gap: 2px;
    align-items: center;
  }

  .section-header .header-actions button {
    width: 22px;
    height: 22px;
    border: none;
    background: transparent;
    color: var(--text-muted);
    border-radius: 4px;
    cursor: default;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 11px;
  }

  /* Section content */
  .section-content {
    transition: padding 0.2s, margin 0.2s, border 0.2s;
    position: relative;
  }

  /* File rows */
  .file-row {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 4px 12px;
    font-size: 12px;
    cursor: default;
    transition: padding-left 0.2s, background 0.1s;
  }

  .file-row:hover {
    background: rgba(69, 71, 90, 0.3);
  }

  .file-row .file-icon {
    width: 14px;
    height: 14px;
    min-width: 14px;
    border-radius: 3px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 9px;
    font-weight: 700;
  }

  .file-row .file-path {
    flex: 1;
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .file-row .file-path .dir {
    color: var(--text-muted);
  }

  .file-row .file-path .name {
    color: var(--text-secondary);
  }

  .file-row .status-letter {
    font-size: 11px;
    font-weight: 600;
    font-family: ui-monospace, 'SF Mono', 'Cascadia Code', Menlo, monospace;
    min-width: 14px;
    text-align: right;
  }

  .status-M { color: var(--orange); }
  .status-U { color: var(--green); }
  .status-A { color: var(--blue); }
  .status-D { color: var(--red); }

  .badge-needs { background: rgba(250, 179, 135, 0.15); color: var(--orange); }
  .badge-saved { background: rgba(250, 179, 135, 0.15); color: var(--orange); }
  .badge-reviewed { background: rgba(166, 227, 161, 0.15); color: var(--green); }

  .icon-needs { color: var(--orange); }
  .icon-saved { color: var(--orange); }
  .icon-reviewed { color: var(--text-muted); }

  /* File icon colors */
  .ficon-ts { background: #3178c6; color: white; }
  .ficon-rs { background: #dea584; color: #1e1e2e; }
  .ficon-json { background: #f9e2af; color: #1e1e2e; }
  .ficon-html { background: #f38ba8; color: white; }
  .ficon-md { background: #89b4fa; color: white; }
  .ficon-tsx { background: #3178c6; color: white; }
  .ficon-toml { background: #6c7086; color: white; }

  /* Mode: indent */
  .mode-indent .file-row {
    padding-left: 28px;
  }

  /* Mode: accent-border */
  .mode-accent-border .section-content {
    border-left: 2px solid transparent;
    margin-left: 10px;
  }
  .mode-accent-border .section-content.accent-needs { border-left-color: var(--orange); }
  .mode-accent-border .section-content.accent-saved { border-left-color: var(--orange); }
  .mode-accent-border .section-content.accent-reviewed { border-left-color: var(--text-faint); }

  /* Mode: bg-band */
  .mode-bg-band .section-header {
    background: rgba(69, 71, 90, 0.35);
  }

  /* Mode: combo */
  .mode-combo .file-row {
    padding-left: 28px;
  }
  .mode-combo .section-header .section-title {
    font-weight: 600;
    font-size: 12px;
  }
  .mode-combo .section-wrapper + .section-wrapper {
    margin-top: 8px;
  }

  /* Modifier: top-border */
  .mod-top-border .section-wrapper + .section-wrapper .section-header {
    border-top: 1px solid var(--edge);
  }

  /* Modifier: section-gap */
  .mod-section-gap .section-wrapper + .section-wrapper {
    margin-top: 6px;
  }

  /* Modifier: bg-band (as modifier) */
  .mod-header-bg .section-header {
    background: rgba(69, 71, 90, 0.3);
  }

  /* Prompt area */
  .prompt-area {
    border-top: 1px solid var(--edge);
    background: var(--bg-surface);
    padding: 16px 20px;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .prompt-area label {
    font-size: 11px;
    font-weight: 500;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.06em;
  }

  .prompt-text {
    font-family: ui-monospace, 'SF Mono', 'Cascadia Code', Menlo, monospace;
    font-size: 12px;
    color: var(--text-secondary);
    line-height: 1.6;
    background: var(--bg);
    border: 1px solid var(--edge);
    border-radius: 6px;
    padding: 12px;
    white-space: pre-wrap;
    max-height: 120px;
    overflow-y: auto;
  }

  .copy-btn {
    align-self: flex-end;
    padding: 6px 14px;
    border-radius: 6px;
    border: 1px solid var(--edge);
    background: var(--bg-raised);
    color: var(--text);
    font-size: 12px;
    cursor: pointer;
    transition: all 0.15s;
  }

  .copy-btn:hover {
    background: var(--bg-hover);
  }

  .copy-btn.copied {
    border-color: var(--green);
    color: var(--green);
  }
</style>
</head>
<body>

<div class="controls">
  <div>
    <h1>Section Hierarchy</h1>
    <p class="desc">Compare approaches for visually distinguishing section headers from their file children in the sidebar.</p>
  </div>

  <div class="option-group">
    <label>Approach</label>
    <button class="option-btn active" data-mode="indent" onclick="setMode('indent')">
      <span class="radio"></span>
      <span class="option-text">
        <strong>Indent children</strong>
        File rows get extra left padding, sitting visually "inside" their section.
      </span>
    </button>
    <button class="option-btn" data-mode="accent-border" onclick="setMode('accent-border')">
      <span class="radio"></span>
      <span class="option-text">
        <strong>Left accent border</strong>
        A thin colored line on the left edge groups children under their section.
      </span>
    </button>
    <button class="option-btn" data-mode="bg-band" onclick="setMode('bg-band')">
      <span class="radio"></span>
      <span class="option-text">
        <strong>Header background band</strong>
        Section headers get a subtle filled background as visual separators.
      </span>
    </button>
    <button class="option-btn" data-mode="combo" onclick="setMode('combo')">
      <span class="radio"></span>
      <span class="option-text">
        <strong>Indent + spacing</strong>
        Children indented with more breathing room between sections.
      </span>
    </button>
  </div>

  <div class="option-group">
    <label>Modifiers (combine with above)</label>
    <div class="modifier-group">
      <label class="mod-label">
        <input type="checkbox" id="mod-top-border" onchange="updateAll()">
        Top border between sections
      </label>
      <label class="mod-label">
        <input type="checkbox" id="mod-section-gap" onchange="updateAll()">
        Extra gap between sections
      </label>
      <label class="mod-label">
        <input type="checkbox" id="mod-header-bg" onchange="updateAll()">
        Header background tint
      </label>
    </div>
  </div>
</div>

<div class="right">
  <div class="preview-area">
    <div class="sidebar-mock" id="sidebar">
      <div class="tab-bar">
        <div class="tab">Git</div>
        <div class="tab active">Review</div>
        <div class="tab">Browse</div>
        <div class="tab">Commits</div>
      </div>

      <div id="sections-container">
        <!-- Needs Review -->
        <div class="section-wrapper">
          <div class="section-header">
            <span class="section-icon icon-needs">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
            </span>
            <span class="section-title">Needs Review</span>
            <span class="badge badge-needs">90</span>
            <span class="header-actions">
              <button title="Toggle view">≡</button>
              <button title="Menu">⋮</button>
            </span>
          </div>
          <div class="section-content accent-needs">
            <div class="file-row">
              <span class="file-icon ficon-html">H</span>
              <span class="file-path"><span class="name">dependency-graph-playground.html</span></span>
              <span class="status-letter status-U">U</span>
            </div>
            <div class="file-row">
              <span class="file-icon ficon-json">{ }</span>
              <span class="file-path"><span class="name">package-lock.json</span></span>
              <span class="status-letter status-M">M</span>
            </div>
            <div class="file-row">
              <span class="file-icon ficon-json">{ }</span>
              <span class="file-path"><span class="name">package.json</span></span>
              <span class="status-letter status-M">M</span>
            </div>
            <div class="file-row">
              <span class="file-icon ficon-md">M</span>
              <span class="file-path"><span class="dir">proposals/</span><span class="name">hunk-decomposition.md</span></span>
              <span class="status-letter status-U">U</span>
            </div>
            <div class="file-row">
              <span class="file-icon ficon-md">M</span>
              <span class="file-path"><span class="dir">proposals/</span><span class="name">incremental-classify.md</span></span>
              <span class="status-letter status-U">U</span>
            </div>
            <div class="file-row">
              <span class="file-icon ficon-rs">R</span>
              <span class="file-path"><span class="dir">review/src/sources/</span><span class="name">local_git.rs</span></span>
              <span class="status-letter status-M">M</span>
            </div>
            <div class="file-row">
              <span class="file-icon ficon-rs">R</span>
              <span class="file-path"><span class="dir">review/src/symbols/</span><span class="name">mod.rs</span></span>
              <span class="status-letter status-M">M</span>
            </div>
            <div class="file-row">
              <span class="file-icon ficon-rs">R</span>
              <span class="file-path"><span class="dir">src-tauri/src/desktop/</span><span class="name">commands.rs</span></span>
              <span class="status-letter status-M">M</span>
            </div>
          </div>
        </div>

        <!-- Saved for Later -->
        <div class="section-wrapper">
          <div class="section-header">
            <span class="section-icon icon-saved">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"/></svg>
            </span>
            <span class="section-title">Saved for Later</span>
            <span class="badge badge-saved">2</span>
            <span class="header-actions">
              <button title="Toggle view">≡</button>
              <button title="Menu">⋮</button>
            </span>
          </div>
          <div class="section-content accent-saved">
            <div class="file-row">
              <span class="file-icon ficon-ts">TS</span>
              <span class="file-path"><span class="dir">src/api/</span><span class="name">client.ts</span></span>
              <span class="status-letter status-M">M</span>
            </div>
            <div class="file-row">
              <span class="file-icon ficon-tsx">TX</span>
              <span class="file-path"><span class="dir">src/components/</span><span class="name">OverviewContent.tsx</span></span>
              <span class="status-letter status-M">M</span>
            </div>
          </div>
        </div>

        <!-- Reviewed -->
        <div class="section-wrapper">
          <div class="section-header">
            <span class="section-icon icon-reviewed">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
            </span>
            <span class="section-title">Reviewed</span>
            <span class="badge badge-reviewed">10</span>
            <span class="header-actions">
              <button title="Toggle view">≡</button>
              <button title="Menu">⋮</button>
            </span>
          </div>
          <div class="section-content accent-reviewed">
            <div class="file-row">
              <span class="file-icon ficon-tsx">TX</span>
              <span class="file-path"><span class="dir">src/components/FilesPanel/</span><span class="name">FileNode.tsx</span></span>
              <span class="status-letter status-M">M</span>
            </div>
            <div class="file-row">
              <span class="file-icon ficon-tsx">TX</span>
              <span class="file-path"><span class="dir">src/components/FilesPanel/</span><span class="name">FlatFileNode.tsx</span></span>
              <span class="status-letter status-M">M</span>
            </div>
            <div class="file-row">
              <span class="file-icon ficon-tsx">TX</span>
              <span class="file-path"><span class="dir">src/components/FilesPanel/</span><span class="name">GitStatusPanel.tsx</span></span>
              <span class="status-letter status-M">M</span>
            </div>
            <div class="file-row">
              <span class="file-icon ficon-tsx">TX</span>
              <span class="file-path"><span class="dir">src/components/FilesPanel/</span><span class="name">index.tsx</span></span>
              <span class="status-letter status-M">M</span>
            </div>
            <div class="file-row">
              <span class="file-icon ficon-tsx">TX</span>
              <span class="file-path"><span class="dir">src/components/ui/</span><span class="name">collapsible-section.tsx</span></span>
              <span class="status-letter status-M">M</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="prompt-area">
    <label>Prompt output</label>
    <div class="prompt-text" id="prompt-output"></div>
    <button class="copy-btn" id="copy-btn" onclick="copyPrompt()">Copy prompt</button>
  </div>
</div>

<script>
  const MODES = ['indent', 'accent-border', 'bg-band', 'combo'];
  const MODE_CLASSES = {
    'indent': 'mode-indent',
    'accent-border': 'mode-accent-border',
    'bg-band': 'mode-bg-band',
    'combo': 'mode-combo',
  };

  const state = {
    mode: 'indent',
    topBorder: false,
    sectionGap: false,
    headerBg: false,
  };

  function setMode(mode) {
    state.mode = mode;
    document.querySelectorAll('.option-btn').forEach(btn => {
      btn.classList.toggle('active', btn.dataset.mode === mode);
    });
    updateAll();
  }

  function updateAll() {
    state.topBorder = document.getElementById('mod-top-border').checked;
    state.sectionGap = document.getElementById('mod-section-gap').checked;
    state.headerBg = document.getElementById('mod-header-bg').checked;

    const container = document.getElementById('sections-container');

    // Remove all mode/modifier classes
    Object.values(MODE_CLASSES).forEach(cls => container.classList.remove(cls));
    container.classList.remove('mod-top-border', 'mod-section-gap', 'mod-header-bg');

    // Apply current mode
    container.classList.add(MODE_CLASSES[state.mode]);

    // Apply modifiers
    if (state.topBorder) container.classList.add('mod-top-border');
    if (state.sectionGap) container.classList.add('mod-section-gap');
    if (state.headerBg) container.classList.add('mod-header-bg');

    updatePrompt();
  }

  function updatePrompt() {
    const parts = [];

    const modeDescriptions = {
      'indent': 'Indent the file rows within each section by ~16px relative to the section header, creating a clear visual nesting hierarchy.',
      'accent-border': 'Add a 2px left border to each section\'s content area using the section\'s accent color (orange for Needs Review/Saved for Later, muted gray for Reviewed). This creates a colored rail grouping files under their header.',
      'bg-band': 'Give each section header a subtle background fill (surface-raised at ~35% opacity) so headers read as distinct separator bars between groups of files.',
      'combo': 'Indent file rows by ~16px within each section AND add 8px vertical spacing between sections. Use slightly bolder header text (font-weight 600) to reinforce the hierarchy.',
    };

    parts.push(modeDescriptions[state.mode]);

    const mods = [];
    if (state.topBorder) mods.push('a 1px top border (using the edge color) between sections');
    if (state.sectionGap) mods.push('6px extra vertical gap between sections');
    if (state.headerBg) mods.push('a subtle background tint on section headers (surface-raised at 30% opacity)');

    if (mods.length > 0) {
      parts.push('Additionally, add ' + mods.join(', and ') + '.');
    }

    document.getElementById('prompt-output').textContent = parts.join('\n\n');
  }

  function copyPrompt() {
    const text = document.getElementById('prompt-output').textContent;
    navigator.clipboard.writeText(text).then(() => {
      const btn = document.getElementById('copy-btn');
      btn.textContent = 'Copied!';
      btn.classList.add('copied');
      setTimeout(() => {
        btn.textContent = 'Copy prompt';
        btn.classList.remove('copied');
      }, 1500);
    });
  }

  // Initialize
  updateAll();
</script>

</body>
</html>
